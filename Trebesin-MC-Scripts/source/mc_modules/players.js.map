{"version":3,"sources":["mc_modules/players.js"],"names":[],"mappings":"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","file":"players.js","sourcesContent":["import * as Mc from \"@minecraft/server\";\r\nfunction hasItem(entity, typeId, data, amount = { min: 1, max: 64 }) {\r\n    let hasItem = false;\r\n    const inventory = entity.getComponent('inventory');\r\n    const container = inventory.container;\r\n    const inventorySize = inventory.inventorySize;\r\n    for (let slot = 0; slot < inventorySize; slot++) {\r\n        const item = container.getItem(slot);\r\n        if (item && item.typeId === typeId) {\r\n            if (item.data === data || data < 0) {\r\n                if (item.amount >= amount.min && item.amount <= amount.max) {\r\n                    hasItem = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return hasItem\r\n}\r\n\r\nfunction hasItemInv(entity, typeId, data, amount = { min: 1, max: 64 }) {\r\n    let hasItem = false;\r\n    let totalAmount = 0;\r\n    const inventory = entity.getComponent('inventory');\r\n    const container = inventory.container;\r\n    const inventorySize = inventory.inventorySize;\r\n    for (let slot = 0; slot < inventorySize; slot++) {\r\n        const item = container.getItem(slot);\r\n        if (item && item.typeId === typeId) {\r\n            if (item.data === data || data < 0) {\r\n                totalAmount += item.amount;\r\n                if (item.amount > amount.max) {\r\n                    hasItem = false;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (totalAmount >= amount.min && totalAmount <= amount.max) {\r\n        hasItem = true;\r\n    }\r\n    return hasItem\r\n}\r\n\r\nfunction clearItemInv(entity, typeId, type, data, amount = { min: 4, max: 64 }) {\r\n    const inventory = entity.getComponent('inventory');\r\n    const container = inventory.container;\r\n    const inventorySize = inventory.inventorySize;\r\n    let totalAmount = 0;\r\n    let clearSlots = []; //[slottypeId, clearAmount]\r\n    for (let slot = 0; slot < inventorySize; slot++) {\r\n        const item = container.getItem(slot);\r\n        if (item && item.typeId === typeId) {\r\n            if (item.data === data || data < 0) {\r\n                const left2Clear = amount.max - totalAmount;\r\n                if (item.amount >= left2Clear) {\r\n                    clearSlots.push([slot, item.amount - left2Clear]);\r\n                    totalAmount += left2Clear;\r\n                    break;\r\n                } else {\r\n                    clearSlots.push([slot, 0]);\r\n                    totalAmount += item.amount;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (totalAmount < amount.min) {\r\n        totalAmount = 0;\r\n        return totalAmount\r\n    }\r\n    for (const clearSlot of clearSlots) {\r\n        container.setItem(clearSlot[0], new ItemStack(type, clearSlot[1], data));\r\n    }\r\n    return totalAmount\r\n}\r\n\r\nfunction clearItem(entity, typeId, type, data, amount = { min: 1, max: 64 }) {\r\n    const inventory = entity.getComponent('inventory');\r\n    const container = inventory.container;\r\n    const inventorySize = inventory.inventorySize;\r\n    let clearAmount = null;\r\n    for (let slot = 0; slot < inventorySize; slot++) {\r\n        const item = container.getItem(slot);\r\n        if (item && item.typeId === typeId) {\r\n            if (item.data === data || data < 0) {\r\n                clearAmount = item.amount;\r\n                if (item.amount < amount.min) {\r\n                    clearAmount = 0;\r\n                }\r\n                if (item.amount > amount.max) {\r\n                    clearAmount = amount.max\r\n                }\r\n                container.setItem(slot, new ItemStack(type, item.amount - clearAmount, item.data));\r\n            }\r\n        }\r\n    }\r\n    return clearAmount\r\n}\r\n\r\nexport function getEquipedItem(entity) {\r\n    const container = entity.getComponent('inventory').container;\r\n    return container.getItem(entity.selectedSlot);\r\n}\r\n\r\n/**\r\n * \r\n * @param {string} message \r\n * @param {string} [senderText]\r\n * @param {Mc.Player|MC.Player[]} [player]\r\n */\r\nexport function sendMessage(message,senderText = null,player = null) {\r\n    const messageText = senderText == null ? message : `[${senderText}Â§r] ${message}`;\r\n    if (!player) {\r\n        Mc.world.sendMessage(messageText);\r\n    } else {\r\n        if (!Array.isArray(player)) {\r\n            player.sendMessage(messageText);\r\n        } else {\r\n            for (let playerIndex = 0;playerIndex < player.length;playerIndex++) {\r\n                player[playerIndex].sendMessage(messageText);\r\n            }\r\n        }\r\n    }\r\n}"]}