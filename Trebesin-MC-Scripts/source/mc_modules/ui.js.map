{"version":3,"sources":["mc_modules/ui.js"],"names":[],"mappings":"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","file":"ui.js","sourcesContent":["import { Player } from '@minecraft/server';\r\nimport { ModalFormData, MessageFormData, ActionFormData } from \"@minecraft/server-ui\";\r\nimport { logMessage } from '../plugins/debug/debug';\r\n\r\n//Form with title, accepts text fields, toggles, sliders, graphical icons and dropdown menus\r\nconst modalMenuData = {\r\n    title: \"Example Title\",\r\n    withIds: false,\r\n    structure: [\r\n        {\r\n            type: \"toggle\",\r\n            label: \"Hello World\",\r\n            defaultValue: true,\r\n\r\n        },\r\n        {\r\n            type: \"textField\",\r\n            label: \"Hello World\",\r\n            defaultValue: \"\",\r\n            placeholderText: \"Insert Hello World!\"\r\n        },\r\n        {\r\n            type: \"slider\",\r\n            label: \"Hello World\",\r\n            defaultValue: 1,\r\n            minimalValue: 1,\r\n            maximalValue: 100,\r\n            valueStep: 10\r\n        },\r\n        {\r\n            type: \"icon\",\r\n            iconPath: \"/textures/blocks/grass\"\r\n        },\r\n        {\r\n            type: \"dropdown\",\r\n            label: \"Hello World\",\r\n            defaultValueIndex: 0,\r\n            options: [\r\n                \"Hello\",\r\n                \"There\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\n//Form with body, title and 2 buttons\r\nconst messageMenuData = {\r\n    title: \"Example Title\",\r\n    body: \"Example Body\",\r\n    button1: \"Hello World\",\r\n    button2: \"Goodbye World\"\r\n}\r\n\r\n//Form with body and title, accepts only buttons with icons\r\nconst actionMenuData = {\r\n    title: \"Example Title\",\r\n    body: \"Example Body\",\r\n    withIds: true,\r\n    structure: [\r\n        {\r\n            id: \"testId\",\r\n            text: \"Hello World\",\r\n            iconPath: \"/textures/blocks/grass\"\r\n        }\r\n    ]\r\n}\r\n\r\n//!add new features forced shit yk the drill\r\n//Async\r\n\r\n/**\r\n * @typedef {object} ModalMenuElement\r\n * @property {'toggle'|'textField'|'slider'|'icon'|'dropdown'} type - Type of element.\r\n * @property {number} [valueStep] - The step between values for a slider.\r\n * @property {string} [iconPath] - Will document rest later.\r\n*/\r\n\r\n/**\r\n * @typedef {ModalMenuElement & {type: 'slider', valueStep: number}} SliderModalMenuElement\r\n */\r\n\r\n/**\r\n * @typedef ModalMenuData\r\n * @property {string} title\r\n * @property {boolean} [withIds]\r\n * @property {ModalMenuElement[]} structure\r\n */\r\n\r\n/**\r\n * \r\n * @param {ModalMenuData} menuData \r\n * @param {Player} player \r\n * @returns \r\n */\r\nexport async function modalMenu(menuData,player) {\r\n    let menu = new ModalFormData()\r\n    .title(menuData.title);\r\n    if (menuData.structure?.length === 0) throw new Error('No structure found!');\r\n    for (let index = 0;index < menuData.structure.length;index++) {\r\n        const element = menuData.structure[index];\r\n        switch (element.type) {\r\n            case \"toggle\":\r\n                menu.toggle(element.label, element.defaultValue);\r\n                break\r\n            case \"textField\":\r\n                menu.textField(element.label, element.placeholderText, element.defaultValue);\r\n                break\r\n            case \"slider\":\r\n                menu.slider(element.label, element.minimalValue, element.maximalValue, element.valueStep, element.defaultValue);\r\n                break\r\n            case \"icon\":\r\n                menu.icon(element.iconPath);\r\n                break\r\n            case \"dropdown\":\r\n                menu.dropdown(element.label, element.options, element.defaultValueIndex);\r\n                break\r\n            default: \r\n                console.warn(`[UI Parser]: Recieved invalid type of '${element.type}' during parsing! Element has been skipped.`);\r\n        }\r\n    }\r\n\r\n    let formValues;\r\n    const response = await menu.show(player);\r\n    if (response.canceled) return response;\r\n    if (menuData.withIds) {\r\n        formValues = {};\r\n        for (let index = 0;index < response.formValues.length;index++) {\r\n            const formValue = response.formValues[index];\r\n            const elementId = menuData.structure[index].id;\r\n            formValues[elementId] = formValue;\r\n        }\r\n    } else {\r\n        formValues = response.formValues;\r\n    }\r\n    \r\n    return { formValues, canceled: response.canceled, cancelationReason: response.cancelationReason }\r\n}\r\n\r\nexport async function actionMenu(menuData, player) {\r\n    let menu = new ActionFormData()\r\n    .title(menuData.title)\r\n    .body(menuData.body);\r\n    for (const button of menuData.structure) {\r\n        menu.button(button.text,button.iconPath);\r\n    }\r\n\r\n    let selection;\r\n    const response = await menu.show(player);\r\n    if (response.canceled) return response;\r\n    if (menuData.withIds) {\r\n        selection = {};\r\n        selection.index = response.selection;\r\n        selection.id = menuData.structure[response.selection].id;\r\n    } else {\r\n        selection = response.selection;\r\n    }\r\n\r\n    return {\r\n        canceled: response.canceled,\r\n        cancelationReason: response.cancelationReason,\r\n        selection\r\n    }\r\n}\r\n\r\nexport async function messageMenu(menuData, player) {\r\n    const menu = new MessageFormData()\r\n    .title(menuData.title)\r\n    .body(menuData.body)\r\n    .button1(menuData.button1)\r\n    .button2(menuData.button2);\r\n\r\n    const response = await menu.show(player);\r\n\r\n    return response;\r\n}"],"sourceRoot":"../../scripts/"}