{"version":3,"sources":["plugins/commands/workers/admin.js"],"names":[],"mappings":"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","file":"admin.js","sourcesContent":["//APIs:\r\nimport * as Mc from '@minecraft/server';\r\n//Plugins:\r\nimport {Commands} from '../../backend/backend';\r\nimport {playerData as serverPlayerData} from '../../server/server';\r\n//Modules:\r\nimport {sendMessage} from '../../../mc_modules/players';\r\nimport {logMessage} from '../../debug/debug';\r\n\r\nexport function isAdmin(sender) {\r\n\treturn (\r\n\t\tsender.hasTag('admin') ||\r\n\t\tsender.id === '-193273528314' ||\r\n\t\tsender.id === '-279172874239'\r\n\t);\r\n}\r\nexport function isMod(sender) {\r\n\treturn sender.hasTag('moderator') || isAdmin(sender);\r\n}\r\nexport function isBuilder(sender) {\r\n\treturn sender.hasTag('builder') || isMod(sender);\r\n}\r\n\r\nexport function main() {\r\n\tCommands.registerCommand('summon', {\r\n\t\taliases: ['spawn'],\r\n\t\tdescription: 'summons an entity',\r\n\t\tsenderCheck: isBuilder,\r\n\t\tparameters: [\r\n\t\t\t{id: 'entity', type: 'str'},\r\n\t\t\t{id: 'location', type: 'pos', optional: true}\r\n\t\t],\r\n\t\trun(sender, parameters) {\r\n\t\t\ttry {\r\n\t\t\t\tsender.dimension.spawnEntity(\r\n\t\t\t\t\tparameters.entity,\r\n\t\t\t\t\tparameters.location ?? sender.location\r\n\t\t\t\t);\r\n\t\t\t\tsendMessage(`Summoned ${parameters.entity}!`, 'CMD', sender);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsendMessage(`Error! ${error}`, 'CMD', sender);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('instakill', {\r\n\t\taliases: ['ik'],\r\n\t\tdescription: 'makes every punch oneshot everything',\r\n\t\tsenderCheck: isBuilder,\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst instaKillStatus = serverPlayerData.instaKill[sender.id];\r\n\t\t\tif (instaKillStatus) serverPlayerData.instaKill[sender.id] = false;\r\n\t\t\telse serverPlayerData.instaKill[sender.id] = true;\r\n\t\t\tsendMessage(\r\n\t\t\t\t`Your new InstaKill status: ${\r\n\t\t\t\t\tserverPlayerData.instaKill[sender.id]\r\n\t\t\t\t}`,\r\n\t\t\t\t'CMD',\r\n\t\t\t\tsender\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('runas', {\r\n\t\taliases: ['execute', 'executeas'],\r\n\t\tdescription: 'runs a command (with the same prefix) as a user',\r\n\t\tsenderCheck: isAdmin,\r\n\t\tparameters: [\r\n\t\t\t{type: 'selector', id: 'player', playersOnly: true},\r\n\t\t\t{type: 'string', id: 'command'},\r\n\t\t\t{\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tid: 'parameters',\r\n\t\t\t\tarray: Infinity,\r\n\t\t\t\tfullArray: false\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender, parameter) {\r\n\t\t\tfor (let i = 0; i < parameter.player.length; i++) {\r\n\t\t\t\tCommands.runCommand(\r\n\t\t\t\t\tparameter.command,\r\n\t\t\t\t\tparameter.parameters.join(' '),\r\n\t\t\t\t\tparameter.player[i],\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('dupe', {\r\n\t\tparameters: [\r\n\t\t\t{id: 'count', type: 'integer', optional: true},\r\n\t\t\t{id: 'whomTo', type: 'selector', playersOnly: true, optional: true},\r\n\t\t\t{id: 'name', type: 'string', optional: true}\r\n\t\t],\r\n\t\taliases: [],\r\n\t\tsenderCheck: isBuilder,\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tconst container = sender.getComponent('inventory').container;\r\n\t\t\tconst item = container.getItem(sender.selectedSlot);\r\n\t\t\tif (parameter.name) item.nameTag = parameter.name;\r\n\t\t\tif (item != null) {\r\n\t\t\t\tconst itemReceivers = parameter.whomTo ?? [sender];\r\n\t\t\t\tfor (let j = 0; j < itemReceivers.length; j++) {\r\n\t\t\t\t\tconst player = itemReceivers[j];\r\n\t\t\t\t\tconst receiverContainer =\r\n\t\t\t\t\t\tplayer.getComponent('inventory').container;\r\n\t\t\t\t\tfor (let i = 0; i < (parameter.count ?? 1); i++) {\r\n\t\t\t\t\t\tif (receiverContainer.emptySlotsCount > 0) {\r\n\t\t\t\t\t\t\treceiverContainer.addItem(item);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tplayer.dimension.spawnItem(item, player.location);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t\t`Added copy of ${item.typeId} to your inventory by ${sender.name}`,\r\n\t\t\t\t\t\t\t'CMD',\r\n\t\t\t\t\t\t\tplayer\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsendMessage(`No item equipped!`, 'CMD', sender);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdescription: 'dupes item in your hand'\r\n\t});\r\n\r\n\tCommands.registerCommand('tphere', {\r\n\t\tparameters: [{id: 'players', type: 'selector'}],\r\n\t\tdescription: 'teleports players you select to you',\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tfor (let i = 0; i < parameter.players.length; i++) {\r\n\t\t\t\tparameter.players[i].teleport(\r\n\t\t\t\t\tsender.location,\r\n\t\t\t\t\t{dimension: sender.dimension}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('tpallhere', {\r\n\t\taliases: ['tpall'],\r\n\t\tdescription: 'teleports all players to you',\r\n\t\tparameters: [],\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tfor (const player of Mc.world.getPlayers()) {\r\n\t\t\t\tplayer.teleport(\r\n\t\t\t\t\tsender.location,\r\n\t\t\t\t\tsender.dimension,\r\n\t\t\t\t\tsender.getRotation().x,\r\n\t\t\t\t\tsender.getRotation().y\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('op', {\r\n\t\tparameters: [{id: 'player', type: 'string', optional: true}],\r\n\t\tsenderCheck: isAdmin,\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tif (!parameter.player) parameter.player = sender.name;\r\n\t\t\tfor (const player of Mc.world.getPlayers()) {\r\n\t\t\t\tif (player.name === parameter.player) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tplayer.setOp(true);\r\n\t\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t\t`§aSuccessfully OPed \"${player.name}\"!`,\r\n\t\t\t\t\t\t\t'CMD',\r\n\t\t\t\t\t\t\tsender\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tsendMessage(error, 'CMD', sender);\r\n\t\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t\t`§cCouldn't OP \"${player.name}\"!`,\r\n\t\t\t\t\t\t\t'CMD',\r\n\t\t\t\t\t\t\tsender\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsendMessage(\r\n\t\t\t\t`§cCouldn't find \"${parameter.player}\"!`,\r\n\t\t\t\t'CMD',\r\n\t\t\t\tsender\r\n\t\t\t);\r\n\t\t},\r\n\t\tdescription: 'ops a player'\r\n\t});\r\n\r\n\tCommands.registerCommand('deop', {\r\n\t\tparameters: [{id: 'player', type: 'string', optional: true}],\r\n\t\tsenderCheck: isAdmin,\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tif (!parameter.player) parameter.player = sender.name;\r\n\t\t\tfor (const player of Mc.world.getPlayers()) {\r\n\t\t\t\tif (player.name === parameter.player) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tplayer.setOp(false);\r\n\t\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t\t`§aSuccessfully deOPed \"${player.name}\"!`,\r\n\t\t\t\t\t\t\t'CMD',\r\n\t\t\t\t\t\t\tsender\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\tsendMessage(error, 'CMD', sender);\r\n\t\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t\t`§cCouldn't deOP \"${player.name}\"!`,\r\n\t\t\t\t\t\t\t'CMD',\r\n\t\t\t\t\t\t\tsender\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsendMessage(\r\n\t\t\t\t`§cCouldn't find \"${parameter.player}\"!`,\r\n\t\t\t\t'CMD',\r\n\t\t\t\tsender\r\n\t\t\t);\r\n\t\t},\r\n\t\tdescription: 'deops a player'\r\n\t});\r\n\r\n\t//gamemode commmands\r\n\r\n\tCommands.registerCommand('gmc', {\r\n\t\taliases: [\r\n\t\t\t'gamemodecreative',\r\n\t\t\t'gamemode',\r\n\t\t\t'gamemodec',\r\n\t\t\t'gm0',\r\n\t\t\t'gmcreative',\r\n\t\t\t'creative'\r\n\t\t],\r\n\t\tparameters: [],\r\n\t\tsenderCheck: isBuilder,\r\n\t\trun: async (sender) => {\r\n\t\t\tawait sender.runCommandAsync(`gamerule sendcommandfeedback false`); //could this be solved better? - No\r\n\t\t\tawait sender.runCommandAsync(`gamemode c @s `);\r\n\t\t\tif (!sender.hasTag('fly')) {\r\n\t\t\t\tawait sender.runCommandAsync(`tag @s add fly`);\r\n\t\t\t\tawait sender.runCommandAsync(`ability @s mayfly true`);\r\n\t\t\t}\r\n\t\t\tsendMessage(\r\n\t\t\t\t'you are now in §lcreative§r§f Mode',\r\n\t\t\t\t'§aCMD§f',\r\n\t\t\t\tsender\r\n\t\t\t);\r\n\t\t\tawait sender.runCommandAsync(`gamerule sendcommandfeedback true`);\r\n\t\t},\r\n\t\tdescription: 'sets your gamemode to creative'\r\n\t});\r\n\r\n\tCommands.registerCommand('allowbuild', {\r\n\t\tdescription: 'allows lava placing for players',\r\n\t\taliases: ['allowlava', 'lavaplace', 'allowwater', 'waterplace'],\r\n\t\tsenderCheck: isAdmin,\r\n\t\tparameters: [\r\n\t\t\t{id: 'player', type: 'selector', optional: true, playersOnly: true}\r\n\t\t],\r\n\t\trun: (sender, parameter) => {\r\n\t\t\tconst player = parameter.player?.[0] ?? sender;\r\n\t\t\tif (sender.hasTag('certified_builder')) {\r\n\t\t\t\tsender.removeTag('certified_builder');\r\n\t\t\t\tsendMessage(\r\n\t\t\t\t\t'you have been rewoked the permision to place lava',\r\n\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tsendMessage(\r\n\t\t\t\t\t`${player.name} been rewoked the permision to place lava`,\r\n\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\tsender\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tsender.addTag('certified_builder');\r\n\t\t\t\tsendMessage(\r\n\t\t\t\t\t'you are now able to place lava',\r\n\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\tplayer\r\n\t\t\t\t);\r\n\t\t\t\tsendMessage(\r\n\t\t\t\t\t`${player.name} is now able to place lava`,\r\n\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\tsender\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('log', {\r\n\t\tdescription: 'turns chat log broadcast on/off per player',\r\n\t\taliases: ['logs', 'logmessages', 'seelogs', 'seelogmessages'],\r\n\t\tsenderCheck: isAdmin,\r\n\t\tparameters: [],\r\n\t\trun: (sender) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (sender.hasTag('log')) {\r\n\t\t\t\t\tsender.removeTag('log');\r\n\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t'logmessages will no longer show',\r\n\t\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\t\tsender\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsender.addTag('log');\r\n\t\t\t\t\tsendMessage(\r\n\t\t\t\t\t\t'you will now see logmessages',\r\n\t\t\t\t\t\t'§aCMD§f',\r\n\t\t\t\t\t\tsender\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tsendMessage(`Error! ${error}`, 'CMD', sender);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('gms', {\r\n\t\taliases: [\r\n\t\t\t'gamemodesurvival',\r\n\t\t\t'gamemodes',\r\n\t\t\t'gm1',\r\n\t\t\t'gmsurvival',\r\n\t\t\t'survival'\r\n\t\t],\r\n\t\tparameters: [],\r\n\t\tsenderCheck: isBuilder,\r\n\t\trun: async (sender) => {\r\n\t\t\tawait sender.runCommandAsync(`gamerule sendcommandfeedback false`);\r\n\t\t\tawait sender.runCommandAsync(`gamemode s @s `);\r\n\t\t\tif (sender.hasTag('fly')) {\r\n\t\t\t\tawait sender.runCommandAsync(`tag @s remove fly`);\r\n\t\t\t\tawait sender.runCommandAsync(`ability @s mayfly false`);\r\n\t\t\t}\r\n\t\t\tsendMessage(\r\n\t\t\t\t'you are now in §lsurvival§r§f Mode',\r\n\t\t\t\t'§aCMD§f',\r\n\t\t\t\tsender\r\n\t\t\t);\r\n\t\t\tawait sender.runCommandAsync(`gamerule sendcommandfeedback true`);\r\n\t\t},\r\n\t\tdescription: 'sets your gamemode to survival'\r\n\t});\r\n}\r\n"]}