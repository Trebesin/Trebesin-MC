{"version":3,"sources":["plugins/commands/workers/items.js"],"names":[],"mappings":"AAAA,OAAO;AACP,OAAO,KAAK,EAAE,MAAM,mBAAmB,CAAC;AACxC,UAAU;AACV,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,SAAS,CAAC;AAC7C,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,UAAU;AACV,OAAO,EAAE,WAAW,EAAE,MAAM,6BAA6B,CAAC;AAG1D,MAAM,UAAU,IAAI;IAChB,MAAM,YAAY,GAAG;QACjB,qBAAqB,EAAE;YACnB,KAAK,EAAE,OAAO;YACd,SAAS,EAAE,GAAG;SACjB;KACJ,CAAA;IACD,QAAQ,CAAC,eAAe,CAAC,aAAa,EAAC;QACnC,OAAO,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,IAAI,CAAC,EAAE,WAAW,EAAE,SAAS;QACpE,UAAU,EAAE;YACR;gBACI,IAAI,EAAE,KAAK;gBACX,EAAE,EAAE,aAAa;aACpB;YACD;gBACI,IAAI,EAAE,QAAQ;gBACd,EAAE,EAAE,mBAAmB;gBACvB,KAAK,EAAE,QAAQ;gBACf,SAAS,EAAE,KAAK;aACnB;SACJ;QACD;;;;WAIG;QACH,GAAG,CAAC,MAAM,EAAC,UAAU;YACjB,MAAM,WAAW,GAAG,IAAI,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,wBAAwB,CAAC,EAAC,CAAC,CAAC,CAAC;YACnF,WAAW,CAAC,OAAO,CAAC,CAAC,UAAU,CAAC,WAAW,EAAC,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACrF,WAAW,CAAC,OAAO,GAAG,UAAU,CAAC,QAAQ,IAAI,SAAS,UAAU,CAAC,WAAW,EAAE,CAAC;YAC/E,MAAM,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAChE,WAAW,CAAC,6CAA6C,UAAU,CAAC,WAAW,uCAAuC,EAAC,KAAK,EAAC,MAAM,CAAC,CAAC;QACzI,CAAC;KACJ,CAAC,CAAC;IAEH,EAAE,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,SAAS,EAAE,EAAE;QAClD,kBAAkB;QAClB,IAAI,SAAS,CAAC,SAAS,CAAC,MAAM,KAAK,wBAAwB,EAAE;YACzD,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YAC1C,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC5B,MAAM,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC/B,EAAE,CAAC,MAAM,CAAC,UAAU,CAChB,GAAG,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,OAAO,EAAC,UAAU,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CACpE,CAAC;SACL;QACD,qBAAqB;QACrB,MAAM,WAAW,GAAG,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACxD,IAAI,WAAW,EAAE;YACb,EAAE,CAAC,MAAM,CAAC,UAAU,CAChB,GAAG,EAAE,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,KAAK,EAAC,WAAW,CAAC,SAAS,EAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,CACzF,CAAC;SACL;IACL,CAAC,CAAC,CAAA;AACN,CAAC","file":"items.js","sourcesContent":["//APIs:\nimport * as Mc from '@minecraft/server';\n//Plugins:\nimport { isAdmin, isBuilder } from './admin';\nimport { Commands } from '../../backend/backend';\n//Modules:\nimport { sendMessage } from '../../../mc_modules/players';\n\n\nexport function main() {\n    const itemCommands = {\n        'trebesin:cmd_phaser': {\n            input: 'phase',\n            parameter: '2'\n        }\n    }\n    Commands.registerCommand('commanditem',{\n        aliases: [\"itemcommand\", \"customitem\", \"ci\"], senderCheck: isBuilder,\n        parameters: [\n            {\n                type: 'str',\n                id: 'commandName'\n            },\n            {\n                type: \"string\",\n                id: \"commandParameters\",\n                array: Infinity,\n                fullArray: false\n            }\n        ],\n        /**\n         * \n         * @param {Player} sender \n         * @param {*} parameters \n         */\n        run(sender,parameters) {\n            const commandItem = new Mc.ItemStack(Mc.ItemTypes.get('trebesin:cmd_universal'),1);\n            commandItem.setLore([parameters.commandName,parameters.commandParameters.join(' ')]);\n            commandItem.nameTag = parameters.itemName ?? `[CMD] ${parameters.commandName}`;\n            sender.getComponent('inventory').container.addItem(commandItem);\n            sendMessage(`Successfully created item for the command ${parameters.commandName}. It's been addded to your inventory.`,'CMD',sender);\n        }\n    });\n\n    Mc.world.beforeEvents.itemUse.subscribe((eventData) => {\n        //## Dynamic item:\n        if (eventData.itemStack.typeId === 'trebesin:cmd_universal') {\n            const itemLore = eventData.item.getLore();\n            const command = itemLore[0];\n            const parameters = itemLore[1];\n            Mc.system.runTimeout(\n                () => Commands.runCommand(command,parameters,eventData.source), 1\n            );\n        }\n        //## Hardcoded items:\n        const itemCommand = itemCommands[eventData.item.typeId];\n        if (itemCommand) {\n            Mc.system.runTimeout (\n                () => Commands.runCommand(itemCommand.input,itemCommand.parameter,eventData.source), 1\n            );\n        }\n    })\n}"]}