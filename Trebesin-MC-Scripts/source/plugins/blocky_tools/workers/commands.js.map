{"version":3,"sources":["plugins/blocky_tools/workers/commands.js"],"names":[],"mappings":"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","file":"commands.js","sourcesContent":["//APIs:\r\nimport * as Mc from '@minecraft/server';\r\n//Plugins:\r\nimport * as Sessions from './sessions';\r\nimport {editBlock, setBlockPermutation, setBlockType} from '../../block_history/block_history';\r\nimport {isAdmin} from '../../commands/workers/admin';\r\n//Modules:\r\nimport {generateBlockArea} from '../../../mc_modules/blocks';\r\nimport {generateBlockPyramid} from '../../../js_modules/geometry';\r\nimport {CommandParser} from '../../../mc_modules/commandParser';\r\nimport {sendMessage} from '../../../mc_modules/players';\r\nimport * as VectorMath from '../../../js_modules/vectorMath';\r\nimport {logMessage} from '../../debug/debug';\r\n\r\nconst Commands = new CommandParser({\r\n\tprefix: '.',\r\n\tcaseSensitive: false\r\n});\r\n\r\n\r\nexport async function main() {\r\n\tCommands.registerCommand('restart', {\r\n\t\tdescription: 'Initializes the Blocky Tools session for the player that invokes the command.',\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tSessions.startSession(sender);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('menu', {\r\n\t\tdescription: 'Open action menu with all possible actions.',\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'submenu',\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\toptional:true\r\n\t\t\t}\r\n\t\t],\r\n\t\trun: Sessions.actionMenu\r\n\t});\r\n\r\n\tCommands.registerCommand('pointer', {\r\n\t\tdescription: 'Switches the current pointer mode.',\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'mode',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\toptional: true,\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst modeInput = parameters?.mode?.toUpperCase();\r\n\t\t\tlet pointerMode = Sessions.PointerMode[modeInput];\r\n\t\t\tif (modeInput != null && pointerMode == null) {\r\n\t\t\t\tsendMessage('§cInvalid choice of pointer mode!§r Options are: §c\"BLOCK\",\"FACE\",\"FREE\",\"ACTION\"§r.','§2BT§r',sender);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.switchPointer(pointerMode);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('fillSelectionCorners',{\r\n\t\tparameters: [{\r\n\t\t\tid:'fillBlock',\r\n\t\t\ttype:'blockPermutation'\r\n\t\t}],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.fillSelectionCorners(parameters.fillBlock.permutation);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('selectionMinMax',{\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.sendSelectionBounds();\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('fills',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'fillBlock',\r\n\t\t\t\ttype:'blockPermutation'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'fillMode',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\toptional: true,\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'hollow': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'thickness',\r\n\t\t\t\t\t\t\ttype: 'integer',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'outline': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'thickness',\r\n\t\t\t\t\t\t\ttype: 'integer',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'stepBy',\r\n\t\t\t\t\t\t\ttype: 'integer',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'grid': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'stepX',\r\n\t\t\t\t\t\t\ttype: 'integer',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'stepY',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'stepZ',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst options = {};\r\n\t\t\tif (parameters.fillMode === 'grid') {\r\n\t\t\t\toptions.stepBy = {};\r\n\t\t\t\toptions.stepBy.x = parameters.stepX ?? 2;\r\n\t\t\t\toptions.stepBy.y = parameters.stepY ?? options.stepBy.x;\r\n\t\t\t\toptions.stepBy.z = parameters.stepZ ?? options.stepBy.y;\r\n\t\t\t};\r\n\t\t\tif (parameters.fillMode === 'hollow') {\r\n\t\t\t\toptions.hollow = true;\r\n\t\t\t\toptions.width = parameters.thickness ?? 1;\r\n\t\t\t};\r\n\t\t\tif (parameters.fillMode === 'outline') {\r\n\t\t\t\toptions.stepBy = parameters.stepBy ?? 1;\r\n\t\t\t\toptions.width = parameters.thickness ?? 1;\r\n\t\t\t\tsession.fillSelectionOutline(parameters.fillBlock.permutation,options);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\tsession.fillSelection(parameters.fillBlock.permutation,options);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('fillReplaceSelection',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'fillBlock',\r\n\t\t\t\ttype:'blockPermutation'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:'replaceMode',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'include': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'replacePermutations',\r\n\t\t\t\t\t\t\ttype: 'blockPermutation',\r\n\t\t\t\t\t\t\tarray: Infinity,\r\n\t\t\t\t\t\t\tfullArray: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'exclude': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'replacePermutations',\r\n\t\t\t\t\t\t\ttype: 'blockPermutation',\r\n\t\t\t\t\t\t\tarray: Infinity,\r\n\t\t\t\t\t\t\tfullArray: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\tasync run(sender,parameters) {\r\n\t\t\t//~ Changes userStates to exactMatch.\r\n\t\t\tconst replacePermutations = [];\r\n\t\t\tfor (let index = 0;index < parameters.replacePermutations.length; index++) {\r\n\t\t\t\tconst replaceData = parameters.replacePermutations[index];\r\n\t\t\t\treplacePermutations.push({\r\n\t\t\t\t\tpermutation: replaceData.permutation,\r\n\t\t\t\t\texactMatch: replaceData.userStates\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.fillReplaceSelection(\r\n\t\t\t\tparameters.fillBlock,\r\n\t\t\t\treplacePermutations,\r\n\t\t\t\tparameters.replaceMode === 'exclude',\r\n\t\t\t)\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('isInsideSelection',{\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.sendSelectionInside();\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('flip',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'axis',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'x':[],\r\n\t\t\t\t\t'y':[],\r\n\t\t\t\t\t'z':[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.flip(parameters.axis);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('flipClipboard',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'axis',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'x':[],\r\n\t\t\t\t\t'y':[],\r\n\t\t\t\t\t'z':[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst clipboard = session.getClipboard();\r\n\t\t\tconst config = clipboard.getConfig(0);\r\n\t\t\tconfig.flip[parameters.axis] = !config.flip[parameters.axis];\r\n\t\t\tclipboard.updateParticlePreview(0);\r\n\t\t\t//session.flipClipboard(parameters.axis);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('rotateClipboard',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'angle',\r\n\t\t\t\ttype:'integer'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:'axis',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'x':[],\r\n\t\t\t\t\t'y':[],\r\n\t\t\t\t\t'z':[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst clipboard = session.getClipboard();\r\n\t\t\tconst config = clipboard.getConfig(0);\r\n\t\t\tconfig.rotation[parameters.axis] += parameters.angle;\r\n\t\t\tclipboard.updateParticlePreview(0);\r\n\t\t\t//session.rotateClipboard(parameters.angle,parameters.axis);\r\n\t\t}\r\n\t});\r\n\r\n\t//All clipboard commands will default to the current selected index\r\n\tCommands.registerCommand('scaleClipboard',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'scale',\r\n\t\t\t\ttype:'float'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:'axis',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\toptional: true,\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'x':[],\r\n\t\t\t\t\t'y':[],\r\n\t\t\t\t\t'z':[]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst clipboard = session.getClipboard();\r\n\t\t\tconst config = clipboard.getConfig(0);\r\n\t\t\tif (parameters.axis == null) {\r\n\t\t\t\tconfig.scale.x = parameters.scale;\r\n\t\t\t\tconfig.scale.y = parameters.scale;\r\n\t\t\t\tconfig.scale.z = parameters.scale;\r\n\t\t\t} else {\r\n\t\t\t\tconfig.scale[parameters.axis] = parameters.scale;\r\n\t\t\t}\r\n\t\t\tclipboard.updateParticlePreview(0);\r\n\t\t\t//session.scaleClipboard(parameters.scale,parameters.axis);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('setblock',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'fillBlock',\r\n\t\t\t\ttype:'blockPermutation'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid:'location',\r\n\t\t\t\ttype:'position'\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tsetBlockPermutation(\r\n\t\t\t\tsender.dimension.getBlock(parameters.location),\r\n\t\t\t\tparameters.fillBlock.permutation,\r\n\t\t\t\t{actorId:sender.id,updateType:'blockyTools: player'}\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('paste',{\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.preparePasteSelection(VectorMath.copy(session.pointerBlockLocation));\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('confirm',{\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.setActionConfirmation(true);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('cancel',{\r\n\t\tparameters: [],\r\n\t\trun(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tsession.setActionConfirmation(false);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('pos1',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid: 'location',\r\n\t\t\t\ttype: 'position',\r\n\t\t\t\toptional: true\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst selection = session.getCurrentSelection();\r\n\t\t\tselection.setCorner(0,parameters.location ?? sender.location);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('pos2',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid: 'location',\r\n\t\t\t\ttype: 'position',\r\n\t\t\t\toptional: true\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst selection = session.getCurrentSelection();\r\n\t\t\tselection.setCorner(0,parameters.location ?? sender.location);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('copy',{\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid:'copyMode',\r\n\t\t\t\ttype:'string',\r\n\t\t\t\toptional: true,\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\t'include': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'permutations',\r\n\t\t\t\t\t\t\ttype: 'blockPermutation',\r\n\t\t\t\t\t\t\tarray: Infinity,\r\n\t\t\t\t\t\t\tfullArray: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\t'exclude': [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'permutations',\r\n\t\t\t\t\t\t\ttype: 'blockPermutation',\r\n\t\t\t\t\t\t\tarray: Infinity,\r\n\t\t\t\t\t\t\tfullArray: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst exclusion = (parameters.copyMode ?? 'exclude') === 'exclude';\r\n\t\t\tconst permutations = [];\r\n\t\t\tfor (let index = 0;index < parameters.permutations?.length; index++) {\r\n\t\t\t\tconst replaceData = parameters.permutations[index];\r\n\t\t\t\tpermutations.push({\r\n\t\t\t\t\tpermutation: replaceData.permutation,\r\n\t\t\t\t\texactMatch: replaceData.userStates\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tsession.copySelection(permutations,exclusion);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('selection', {\r\n\t\tdescription: '',\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tchoice: {\r\n\t\t\t\t\tclear: [],\r\n\t\t\t\t\ttranslate: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'x',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'y',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'z',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\textend: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'x',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'y',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'z',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid:'bothWays',\r\n\t\t\t\t\t\t\ttype: 'boolean',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tshrink: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'x',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'y',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'z',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid:'bothWays',\r\n\t\t\t\t\t\t\ttype: 'boolean',\r\n\t\t\t\t\t\t\toptional: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\trotate: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'x',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'y',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 'z',\r\n\t\t\t\t\t\t\ttype: 'integer'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender, parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('moveClipboard', {\r\n\t\tdescription: '',\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid: 'x',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'y',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'z',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst clipboard = session.getClipboard();\r\n\t\t\tclipboard.translateLocations({\r\n\t\t\t\tx: parameters.x,\r\n\t\t\t\ty: parameters.y,\r\n\t\t\t\tz: parameters.z\r\n\t\t\t},0);\r\n\t\t\tclipboard.updateParticlePreview(0);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('movePasteOrigin', {\r\n\t\tdescription: '',\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\tid: 'x',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'y',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: 'z',\r\n\t\t\t\ttype: 'float'\r\n\t\t\t}\r\n\t\t],\r\n\t\trun(sender,parameters) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tif (session.pasteState.originLocation == null) {\r\n\t\t\t\tsendMessage('§nNo paste action!','§2BT§r',sender)\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsession.pasteState.originLocation = VectorMath.sum(\r\n\t\t\t\tsession.pasteState.originLocation,\r\n\t\t\t\t{\r\n\t\t\t\t\tx: parameters.x,\r\n\t\t\t\t\ty: parameters.y,\r\n\t\t\t\t\tz: parameters.z\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('getClipboardBounds', {\r\n\t\tdescription: '',\r\n\t\tparameters: [],\r\n\t\tasync run(sender) {\r\n\t\t\tconst session = Sessions.getSession(sender);\r\n\t\t\tconst clipboard = session.getClipboard();\r\n\t\t\tconst bounds = clipboard.getBounds(0);\r\n\t\t\tsendMessage(`Sending Clipboard Bounds:`,'§2BT§r',sender);\r\n\t\t\tsendMessage(`MAX: §mX:${bounds.max.x} §qY:${bounds.max.y} §tZ:${bounds.max.z}`,'§2BT§r',sender);\r\n\t\t\tsendMessage(`CENTER: §mX:${bounds.center.x} §qY:${bounds.center.y} §tZ:${bounds.center.z}`,'§2BT§r',sender);\r\n\t\t\tsendMessage(`MIN: §mX:${bounds.min.x} §qY:${bounds.min.y} §tZ:${bounds.min.z}`,'§2BT§r',sender);\r\n\t\t}\r\n\t});\r\n\r\n\tCommands.registerCommand('config', {\r\n\t\tdescription: '',\r\n\t\tparameters: [\r\n\t\t],\r\n\t\trun: Sessions.userConfig\r\n\t});\r\n\r\n\tCommands.registerCommand('idk', {\r\n\t\tparameters: [\r\n\t\t\t{\r\n\t\t\t\ttype: 'pos',\r\n\t\t\t\tid: 'location'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'str',\r\n\t\t\t\tid: 'blockId'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: 'int',\r\n\t\t\t\tid: 'size'\r\n\t\t\t}\r\n\t\t],\r\n\t\tsenderCheck: isAdmin,\r\n\t\t/**\r\n\t\t *\r\n\t\t * @param {Mc.Player} sender\r\n\t\t * @param {*} parameters\r\n\t\t */\r\n\t\trun(sender, parameters) {\r\n\t\t\ttry {\r\n\t\t\t\tconst blocks = [];\r\n\t\t\t\tgenerateBlockArea(\r\n\t\t\t\t\tparameters.location,\r\n\t\t\t\t\tparameters.size,\r\n\t\t\t\t\t(location) => {\r\n\t\t\t\t\t\tblocks.push(location);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tfor (let index = 0; index < blocks.length; index++) {\r\n\t\t\t\t\tconst block = blocks[index];\r\n\t\t\t\t\tsetBlockType(\r\n\t\t\t\t\t\tsender.dimension.getBlock(block),\r\n\t\t\t\t\t\tMc.MinecraftBlockTypes.get(parameters.blockId),\r\n\t\t\t\t\t\t{actorId:sender.id}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tsendMessage('Successfully generated the thing!', 'CMD', sender);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tlogMessage(error);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\nexport {Commands};"]}